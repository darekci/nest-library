[2021-04-23T20:39:01.246Z][QUERY]: SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_SCHEMA` = 'library' AND `TABLE_NAME` = 'migrations'
[2021-04-23T20:39:01.257Z][QUERY]: CREATE TABLE `library`.`migrations` (`id` int NOT NULL AUTO_INCREMENT, `timestamp` bigint NOT NULL, `name` varchar(255) NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB
[2021-04-23T20:39:01.303Z][QUERY]: SELECT * FROM `library`.`migrations` `migrations` ORDER BY `id` DESC
[2021-04-23T20:39:01.309Z]0 migrations are already loaded in the database.
[2021-04-23T20:39:01.309Z]1 migrations were found in the source code.
[2021-04-23T20:39:01.310Z]1 migrations are new migrations that needs to be executed.
[2021-04-23T20:39:01.310Z][QUERY]: START TRANSACTION
[2021-04-23T20:39:01.313Z][QUERY]: CREATE TABLE `User` (`id` int NOT NULL AUTO_INCREMENT, `fullName` varchar(100) NOT NULL, `number` varchar(8) NOT NULL, `phone` varchar(20) NOT NULL, `email` varchar(100) NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB
[2021-04-23T20:39:01.356Z][QUERY]: CREATE TABLE `Reservation` (`id` int NOT NULL AUTO_INCREMENT, `fromDate` datetime NOT NULL, `toDate` datetime NOT NULL, `returnDate` datetime NULL, `bookId` int NULL, `userId` int NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB
[2021-04-23T20:39:01.402Z][QUERY]: CREATE TABLE `Book` (`id` int NOT NULL AUTO_INCREMENT, `author` varchar(100) NOT NULL, `title` varchar(300) NOT NULL, `isbn` varchar(30) NULL, `publishYear` int NULL, `publisher` varchar(100) NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB
[2021-04-23T20:39:01.461Z][QUERY]: ALTER TABLE `Reservation` ADD CONSTRAINT `FK_3ccf03e7c91b524a8a82e67b705` FOREIGN KEY (`bookId`) REFERENCES `Book`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
[2021-04-23T20:39:01.553Z][QUERY]: ALTER TABLE `Reservation` ADD CONSTRAINT `FK_2e90c1ad8cbf124ae6111f16f87` FOREIGN KEY (`userId`) REFERENCES `User`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
[2021-04-23T20:39:01.706Z][QUERY]: INSERT INTO `library`.`migrations`(`timestamp`, `name`) VALUES (?, ?) -- PARAMETERS: [1619210326816,"InitialTables1619210326816"]
[2021-04-23T20:39:01.714Z]Migration InitialTables1619210326816 has been executed successfully.
[2021-04-23T20:39:01.714Z][QUERY]: COMMIT
[2021-04-23T20:41:04.398Z][QUERY]: INSERT INTO `Book`(`id`, `author`, `title`, `isbn`, `publishYear`, `publisher`) VALUES (DEFAULT, ?, ?, ?, ?, ?) -- PARAMETERS: ["Stephen King","To","12345678",2019,"Prószyński I S-ka"]
[2021-04-23T20:41:09.319Z][QUERY]: SELECT `BookEntity`.`id` AS `BookEntity_id`, `BookEntity`.`author` AS `BookEntity_author`, `BookEntity`.`title` AS `BookEntity_title`, `BookEntity`.`isbn` AS `BookEntity_isbn`, `BookEntity`.`publishYear` AS `BookEntity_publishYear`, `BookEntity`.`publisher` AS `BookEntity_publisher` FROM `Book` `BookEntity`
[2021-04-23T20:41:31.260Z][QUERY]: INSERT INTO `User`(`id`, `fullName`, `number`, `phone`, `email`) VALUES (DEFAULT, ?, ?, ?, ?) -- PARAMETERS: ["Dariusz Cichorski","ChwWkHER","732191340","dcichy@gmail.com"]
[2021-04-23T20:41:36.823Z][QUERY]: SELECT `UserEntity`.`id` AS `UserEntity_id`, `UserEntity`.`fullName` AS `UserEntity_fullName`, `UserEntity`.`number` AS `UserEntity_number`, `UserEntity`.`phone` AS `UserEntity_phone`, `UserEntity`.`email` AS `UserEntity_email` FROM `User` `UserEntity`
[2021-04-23T20:41:53.815Z][QUERY]: SELECT `UserEntity`.`id` AS `UserEntity_id`, `UserEntity`.`fullName` AS `UserEntity_fullName`, `UserEntity`.`number` AS `UserEntity_number`, `UserEntity`.`phone` AS `UserEntity_phone`, `UserEntity`.`email` AS `UserEntity_email` FROM `User` `UserEntity` WHERE `UserEntity`.`id` IN (?) -- PARAMETERS: [1]
[2021-04-23T20:41:53.823Z][QUERY]: SELECT `BookEntity`.`id` AS `BookEntity_id`, `BookEntity`.`author` AS `BookEntity_author`, `BookEntity`.`title` AS `BookEntity_title`, `BookEntity`.`isbn` AS `BookEntity_isbn`, `BookEntity`.`publishYear` AS `BookEntity_publishYear`, `BookEntity`.`publisher` AS `BookEntity_publisher` FROM `Book` `BookEntity` WHERE `BookEntity`.`id` IN (?) -- PARAMETERS: [1]
[2021-04-23T20:41:53.837Z][QUERY]: SELECT `ReservationEntity`.`id` AS `ReservationEntity_id`, `ReservationEntity`.`fromDate` AS `ReservationEntity_fromDate`, `ReservationEntity`.`toDate` AS `ReservationEntity_toDate`, `ReservationEntity`.`returnDate` AS `ReservationEntity_returnDate`, `ReservationEntity`.`bookId` AS `ReservationEntity_bookId`, `ReservationEntity`.`userId` AS `ReservationEntity_userId` FROM `Reservation` `ReservationEntity` WHERE `ReservationEntity`.`fromDate` < ? AND `ReservationEntity`.`toDate` > ? AND `ReservationEntity`.`bookId` = ? -- PARAMETERS: ["2021-04-23T20:41:53.834Z","2021-04-23T20:41:53.834Z",1]
[2021-04-23T20:41:53.843Z][QUERY]: INSERT INTO `Reservation`(`id`, `fromDate`, `toDate`, `returnDate`, `bookId`, `userId`) VALUES (?, ?, ?, DEFAULT, ?, ?) -- PARAMETERS: [null,"2021-04-23T20:41:53.841Z","2021-05-03T20:41:53.841Z",1,1]
[2021-04-23T20:41:59.739Z][QUERY]: SELECT `ReservationEntity`.`id` AS `ReservationEntity_id`, `ReservationEntity`.`fromDate` AS `ReservationEntity_fromDate`, `ReservationEntity`.`toDate` AS `ReservationEntity_toDate`, `ReservationEntity`.`returnDate` AS `ReservationEntity_returnDate`, `ReservationEntity`.`bookId` AS `ReservationEntity_bookId`, `ReservationEntity`.`userId` AS `ReservationEntity_userId`, `ReservationEntity__book`.`id` AS `ReservationEntity__book_id`, `ReservationEntity__book`.`author` AS `ReservationEntity__book_author`, `ReservationEntity__book`.`title` AS `ReservationEntity__book_title`, `ReservationEntity__book`.`isbn` AS `ReservationEntity__book_isbn`, `ReservationEntity__book`.`publishYear` AS `ReservationEntity__book_publishYear`, `ReservationEntity__book`.`publisher` AS `ReservationEntity__book_publisher`, `ReservationEntity__user`.`id` AS `ReservationEntity__user_id`, `ReservationEntity__user`.`fullName` AS `ReservationEntity__user_fullName`, `ReservationEntity__user`.`number` AS `ReservationEntity__user_number`, `ReservationEntity__user`.`phone` AS `ReservationEntity__user_phone`, `ReservationEntity__user`.`email` AS `ReservationEntity__user_email` FROM `Reservation` `ReservationEntity` LEFT JOIN `Book` `ReservationEntity__book` ON `ReservationEntity__book`.`id`=`ReservationEntity`.`bookId`  LEFT JOIN `User` `ReservationEntity__user` ON `ReservationEntity__user`.`id`=`ReservationEntity`.`userId` WHERE `ReservationEntity`.`fromDate` < ? AND `ReservationEntity`.`toDate` > ? -- PARAMETERS: ["2021-04-23T20:41:59.731Z","2021-04-23T20:41:59.731Z"]
[2021-04-23T20:42:54.002Z][QUERY]: SELECT `ReservationEntity`.`id` AS `ReservationEntity_id`, `ReservationEntity`.`fromDate` AS `ReservationEntity_fromDate`, `ReservationEntity`.`toDate` AS `ReservationEntity_toDate`, `ReservationEntity`.`returnDate` AS `ReservationEntity_returnDate`, `ReservationEntity`.`bookId` AS `ReservationEntity_bookId`, `ReservationEntity`.`userId` AS `ReservationEntity_userId` FROM `Reservation` `ReservationEntity` WHERE `ReservationEntity`.`id` IN (?) -- PARAMETERS: ["1"]
[2021-04-23T20:42:54.014Z][QUERY]: SELECT `ReservationEntity`.`id` AS `ReservationEntity_id`, `ReservationEntity`.`fromDate` AS `ReservationEntity_fromDate`, `ReservationEntity`.`toDate` AS `ReservationEntity_toDate`, `ReservationEntity`.`returnDate` AS `ReservationEntity_returnDate`, `ReservationEntity`.`bookId` AS `ReservationEntity_bookId`, `ReservationEntity`.`userId` AS `ReservationEntity_userId` FROM `Reservation` `ReservationEntity` WHERE `ReservationEntity`.`id` IN (?) -- PARAMETERS: ["1"]
[2021-04-23T20:42:54.021Z][QUERY]: UPDATE `Reservation` SET `id` = ?, `fromDate` = ?, `toDate` = ?, `returnDate` = ? WHERE `id` IN (?) -- PARAMETERS: [1,"2021-04-23T20:41:54.000Z","2021-05-03T20:41:54.000Z","2021-04-23T20:42:54.017Z",1]
[2021-04-23T20:43:00.144Z][QUERY]: SELECT `ReservationEntity`.`id` AS `ReservationEntity_id`, `ReservationEntity`.`fromDate` AS `ReservationEntity_fromDate`, `ReservationEntity`.`toDate` AS `ReservationEntity_toDate`, `ReservationEntity`.`returnDate` AS `ReservationEntity_returnDate`, `ReservationEntity`.`bookId` AS `ReservationEntity_bookId`, `ReservationEntity`.`userId` AS `ReservationEntity_userId`, `ReservationEntity__book`.`id` AS `ReservationEntity__book_id`, `ReservationEntity__book`.`author` AS `ReservationEntity__book_author`, `ReservationEntity__book`.`title` AS `ReservationEntity__book_title`, `ReservationEntity__book`.`isbn` AS `ReservationEntity__book_isbn`, `ReservationEntity__book`.`publishYear` AS `ReservationEntity__book_publishYear`, `ReservationEntity__book`.`publisher` AS `ReservationEntity__book_publisher`, `ReservationEntity__user`.`id` AS `ReservationEntity__user_id`, `ReservationEntity__user`.`fullName` AS `ReservationEntity__user_fullName`, `ReservationEntity__user`.`number` AS `ReservationEntity__user_number`, `ReservationEntity__user`.`phone` AS `ReservationEntity__user_phone`, `ReservationEntity__user`.`email` AS `ReservationEntity__user_email` FROM `Reservation` `ReservationEntity` LEFT JOIN `Book` `ReservationEntity__book` ON `ReservationEntity__book`.`id`=`ReservationEntity`.`bookId`  LEFT JOIN `User` `ReservationEntity__user` ON `ReservationEntity__user`.`id`=`ReservationEntity`.`userId` WHERE `ReservationEntity`.`fromDate` < ? AND `ReservationEntity`.`toDate` > ? -- PARAMETERS: ["2021-04-23T20:43:00.127Z","2021-04-23T20:43:00.127Z"]
[2021-04-23T20:44:11.425Z][QUERY]: SELECT `ReservationEntity`.`id` AS `ReservationEntity_id`, `ReservationEntity`.`fromDate` AS `ReservationEntity_fromDate`, `ReservationEntity`.`toDate` AS `ReservationEntity_toDate`, `ReservationEntity`.`returnDate` AS `ReservationEntity_returnDate`, `ReservationEntity`.`bookId` AS `ReservationEntity_bookId`, `ReservationEntity`.`userId` AS `ReservationEntity_userId`, `ReservationEntity__book`.`id` AS `ReservationEntity__book_id`, `ReservationEntity__book`.`author` AS `ReservationEntity__book_author`, `ReservationEntity__book`.`title` AS `ReservationEntity__book_title`, `ReservationEntity__book`.`isbn` AS `ReservationEntity__book_isbn`, `ReservationEntity__book`.`publishYear` AS `ReservationEntity__book_publishYear`, `ReservationEntity__book`.`publisher` AS `ReservationEntity__book_publisher`, `ReservationEntity__user`.`id` AS `ReservationEntity__user_id`, `ReservationEntity__user`.`fullName` AS `ReservationEntity__user_fullName`, `ReservationEntity__user`.`number` AS `ReservationEntity__user_number`, `ReservationEntity__user`.`phone` AS `ReservationEntity__user_phone`, `ReservationEntity__user`.`email` AS `ReservationEntity__user_email` FROM `Reservation` `ReservationEntity` LEFT JOIN `Book` `ReservationEntity__book` ON `ReservationEntity__book`.`id`=`ReservationEntity`.`bookId`  LEFT JOIN `User` `ReservationEntity__user` ON `ReservationEntity__user`.`id`=`ReservationEntity`.`userId` WHERE `ReservationEntity`.`fromDate` < ? AND `ReservationEntity`.`toDate` > ? AND `ReservationEntity`.`returnDate` IS NULL -- PARAMETERS: ["2021-04-23T20:44:11.394Z","2021-04-23T20:44:11.394Z"]
